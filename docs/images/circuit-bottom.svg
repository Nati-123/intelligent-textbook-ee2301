<svg viewBox="0 0 1000 180" xmlns="http://www.w3.org/2000/svg">

  <!-- Subtle binary background -->
  <text font-family="'Courier New', monospace" font-size="10" letter-spacing="4">
    <tspan x="20" y="16" fill="rgba(30,60,120,0.06)">1 0 1 1 0 0 1 0 1 1 0 1 0 0 1 0</tspan>
    <tspan x="540" y="16" fill="rgba(120,40,160,0.06)">0 1 1 0 1 0 1 1 0 0 1 0 1 1</tspan>
    <tspan x="30" y="172" fill="rgba(0,120,120,0.06)">0 0 1 0 1 1 0 1 1 0 0 1 0 1 1 0</tspan>
    <tspan x="560" y="172" fill="rgba(200,80,40,0.06)">1 1 0 1 0 1 0 0 1 1 0 1 0 1</tspan>
  </text>

  <!-- PCB traces -->
  <g stroke-width="1.2" fill="none" stroke-linecap="round">
    <!-- To FSM -->
    <path d="M0,55 H40 L55,70 H80" stroke="rgba(30,100,200,0.2)"/>
    <path d="M0,90 H30 L42,105 H80" stroke="rgba(30,100,200,0.15)"/>
    <!-- Between FSM states -->
    <path d="M220,70 H270" stroke="rgba(100,50,180,0.2)"/>
    <path d="M380,70 H430" stroke="rgba(0,140,120,0.2)"/>
    <!-- To MUX -->
    <path d="M430,55 H480" stroke="rgba(200,80,40,0.18)"/>
    <path d="M430,90 H480" stroke="rgba(200,80,40,0.15)"/>
    <!-- From MUX -->
    <path d="M570,72 H620" stroke="rgba(200,80,40,0.18)"/>
    <!-- To truth table -->
    <path d="M620,72 L650,55 H700" stroke="rgba(30,100,200,0.15)" stroke-dasharray="3,5"/>
    <!-- Right side -->
    <path d="M870,50 H1000" stroke="rgba(0,140,120,0.18)"/>
    <path d="M870,80 H950 L970,100 H1000" stroke="rgba(100,50,180,0.15)"/>
    <path d="M870,130 H920 L940,145 H1000" stroke="rgba(200,80,40,0.15)"/>
  </g>

  <!-- ===== FSM / State Machine ===== -->
  <!-- State S0 - blue -->
  <g transform="translate(110,30)">
    <circle cx="40" cy="40" r="34" fill="rgba(30,100,200,0.06)" stroke="rgba(30,100,200,0.55)" stroke-width="1.8"/>
    <circle cx="40" cy="40" r="28" fill="none" stroke="rgba(30,100,200,0.25)" stroke-width="0.8"/>
    <text x="40" y="37" fill="rgba(30,100,200,0.7)" font-size="14" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">S0</text>
    <text x="40" y="52" fill="rgba(30,100,200,0.45)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">IDLE</text>
  </g>

  <!-- Transition arrow S0 -> S1 -->
  <g stroke="rgba(100,50,180,0.5)" stroke-width="1.5" fill="none">
    <path d="M184,70 H240 L250,70" marker-end="url(#arrowPurple)"/>
  </g>
  <text x="212" y="62" fill="rgba(100,50,180,0.5)" font-size="7" font-family="'Courier New', monospace" text-anchor="middle">x=1</text>

  <!-- State S1 - purple -->
  <g transform="translate(250,30)">
    <circle cx="40" cy="40" r="34" fill="rgba(100,50,180,0.06)" stroke="rgba(100,50,180,0.55)" stroke-width="1.8"/>
    <circle cx="40" cy="40" r="28" fill="none" stroke="rgba(100,50,180,0.25)" stroke-width="0.8"/>
    <text x="40" y="37" fill="rgba(100,50,180,0.7)" font-size="14" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">S1</text>
    <text x="40" y="52" fill="rgba(100,50,180,0.45)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">LOAD</text>
  </g>

  <!-- Transition arrow S1 -> S2 -->
  <g stroke="rgba(0,140,120,0.5)" stroke-width="1.5" fill="none">
    <path d="M324,70 H390 L400,70" marker-end="url(#arrowTeal)"/>
  </g>
  <text x="362" y="62" fill="rgba(0,140,120,0.5)" font-size="7" font-family="'Courier New', monospace" text-anchor="middle">done</text>

  <!-- State S2 - teal -->
  <g transform="translate(390,30)">
    <circle cx="40" cy="40" r="34" fill="rgba(0,140,120,0.06)" stroke="rgba(0,140,120,0.55)" stroke-width="1.8"/>
    <circle cx="40" cy="40" r="28" fill="none" stroke="rgba(0,140,120,0.25)" stroke-width="0.8"/>
    <text x="40" y="37" fill="rgba(0,140,120,0.7)" font-size="14" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">S2</text>
    <text x="40" y="52" fill="rgba(0,140,120,0.45)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">EXEC</text>
  </g>

  <!-- Self-loop on S0 -->
  <path d="M130,32 Q130,0 155,0 Q180,0 180,32" fill="none" stroke="rgba(30,100,200,0.35)" stroke-width="1.2" marker-end="url(#arrowBlue)"/>
  <text x="155" y="-5" fill="rgba(30,100,200,0.4)" font-size="6" font-family="'Courier New', monospace" text-anchor="middle">x=0</text>

  <!-- Reset arrow into S0 -->
  <path d="M80,70 L110,70" fill="none" stroke="rgba(30,100,200,0.4)" stroke-width="1.5" marker-end="url(#arrowBlue)"/>
  <text x="78" y="62" fill="rgba(30,100,200,0.35)" font-size="7" font-family="'Courier New', monospace" text-anchor="end">RST</text>

  <!-- Return arrow S2 -> S0 (curved underneath) -->
  <path d="M410,104 Q410,145 290,150 Q170,150 150,104" fill="none" stroke="rgba(200,80,40,0.4)" stroke-width="1.2" stroke-dasharray="4,3" marker-end="url(#arrowOrange)"/>
  <text x="280" y="160" fill="rgba(200,80,40,0.35)" font-size="7" font-family="'Courier New', monospace" text-anchor="middle">timeout</text>

  <text x="260" y="130" fill="rgba(100,50,180,0.2)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">FSM</text>

  <!-- ===== 4:1 Multiplexer ===== -->
  <g transform="translate(480,22)">
    <!-- MUX body - trapezoid -->
    <path d="M0,8 L70,0 L70,100 L0,92 Z" fill="rgba(200,80,40,0.05)" stroke="rgba(200,80,40,0.55)" stroke-width="1.8"/>
    <!-- Input lines -->
    <line x1="-15" y1="20" x2="0" y2="20" stroke="rgba(200,80,40,0.45)" stroke-width="1.5"/>
    <line x1="-15" y1="40" x2="0" y2="40" stroke="rgba(200,80,40,0.45)" stroke-width="1.5"/>
    <line x1="-15" y1="60" x2="0" y2="60" stroke="rgba(200,80,40,0.45)" stroke-width="1.5"/>
    <line x1="-15" y1="80" x2="0" y2="80" stroke="rgba(200,80,40,0.45)" stroke-width="1.5"/>
    <!-- Output -->
    <line x1="70" y1="50" x2="88" y2="50" stroke="rgba(200,80,40,0.5)" stroke-width="1.5"/>
    <!-- Select line -->
    <line x1="35" y1="100" x2="35" y2="118" stroke="rgba(200,80,40,0.4)" stroke-width="1.2"/>
    <!-- Input labels -->
    <text x="8" y="24" fill="rgba(200,80,40,0.6)" font-size="8" font-family="'Courier New', monospace">I0</text>
    <text x="8" y="44" fill="rgba(200,80,40,0.6)" font-size="8" font-family="'Courier New', monospace">I1</text>
    <text x="8" y="64" fill="rgba(200,80,40,0.6)" font-size="8" font-family="'Courier New', monospace">I2</text>
    <text x="8" y="84" fill="rgba(200,80,40,0.6)" font-size="8" font-family="'Courier New', monospace">I3</text>
    <!-- Output label -->
    <text x="58" y="46" fill="rgba(200,80,40,0.6)" font-size="8" font-family="'Courier New', monospace">Y</text>
    <!-- Select label -->
    <text x="40" y="116" fill="rgba(200,80,40,0.45)" font-size="7" font-family="'Courier New', monospace">S1 S0</text>
    <!-- Title -->
    <text x="35" y="145" fill="rgba(200,80,40,0.25)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">4:1 MUX</text>
  </g>

  <!-- ===== Truth Table ===== -->
  <g transform="translate(650,18)">
    <!-- Table outline -->
    <rect x="0" y="0" width="120" height="105" rx="3" fill="rgba(30,100,200,0.04)" stroke="rgba(30,100,200,0.4)" stroke-width="1.5"/>
    <!-- Header row -->
    <rect x="0" y="0" width="120" height="22" rx="3" fill="rgba(30,100,200,0.08)"/>
    <line x1="0" y1="22" x2="120" y2="22" stroke="rgba(30,100,200,0.35)" stroke-width="1"/>
    <!-- Column dividers -->
    <line x1="30" y1="0" x2="30" y2="105" stroke="rgba(30,100,200,0.2)" stroke-width="0.8"/>
    <line x1="60" y1="0" x2="60" y2="105" stroke="rgba(30,100,200,0.2)" stroke-width="0.8"/>
    <line x1="90" y1="0" x2="90" y2="105" stroke="rgba(30,100,200,0.3)" stroke-width="1"/>
    <!-- Row dividers -->
    <line x1="0" y1="40" x2="120" y2="40" stroke="rgba(30,100,200,0.12)" stroke-width="0.5"/>
    <line x1="0" y1="58" x2="120" y2="58" stroke="rgba(30,100,200,0.12)" stroke-width="0.5"/>
    <line x1="0" y1="76" x2="120" y2="76" stroke="rgba(30,100,200,0.12)" stroke-width="0.5"/>
    <!-- Headers -->
    <text x="15" y="15" fill="rgba(30,100,200,0.7)" font-size="9" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">A</text>
    <text x="45" y="15" fill="rgba(30,100,200,0.7)" font-size="9" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">B</text>
    <text x="75" y="15" fill="rgba(30,100,200,0.7)" font-size="9" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">Cin</text>
    <text x="105" y="15" fill="rgba(0,140,120,0.7)" font-size="9" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">Sum</text>
    <!-- Data rows -->
    <text font-family="'Courier New', monospace" font-size="8" text-anchor="middle">
      <tspan x="15" y="35" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="45" y="35" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="75" y="35" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="105" y="35" fill="rgba(0,140,120,0.55)">0</tspan>
      <tspan x="15" y="53" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="45" y="53" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="75" y="53" fill="rgba(30,100,200,0.5)">1</tspan><tspan x="105" y="53" fill="rgba(0,140,120,0.55)">1</tspan>
      <tspan x="15" y="71" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="45" y="71" fill="rgba(30,100,200,0.5)">1</tspan><tspan x="75" y="71" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="105" y="71" fill="rgba(0,140,120,0.55)">1</tspan>
      <tspan x="15" y="89" fill="rgba(30,100,200,0.5)">0</tspan><tspan x="45" y="89" fill="rgba(30,100,200,0.5)">1</tspan><tspan x="75" y="89" fill="rgba(30,100,200,0.5)">1</tspan><tspan x="105" y="89" fill="rgba(0,140,120,0.55)">0</tspan>
    </text>
    <!-- Label -->
    <text x="60" y="120" fill="rgba(30,100,200,0.2)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">TRUTH TABLE</text>
  </g>

  <!-- ===== Binary Counter / Register ===== -->
  <g transform="translate(820,15)">
    <!-- Register box -->
    <rect x="0" y="0" width="110" height="55" rx="3" fill="rgba(0,140,120,0.05)" stroke="rgba(0,140,120,0.5)" stroke-width="1.5"/>
    <!-- Bit cells -->
    <line x1="28" y1="0" x2="28" y2="55" stroke="rgba(0,140,120,0.25)" stroke-width="0.8"/>
    <line x1="56" y1="0" x2="56" y2="55" stroke="rgba(0,140,120,0.25)" stroke-width="0.8"/>
    <line x1="83" y1="0" x2="83" y2="55" stroke="rgba(0,140,120,0.25)" stroke-width="0.8"/>
    <!-- Bit values -->
    <text font-family="'Courier New', monospace" font-size="18" text-anchor="middle" font-weight="bold">
      <tspan x="14" y="38" fill="rgba(0,140,120,0.65)">1</tspan>
      <tspan x="42" y="38" fill="rgba(0,140,120,0.65)">0</tspan>
      <tspan x="70" y="38" fill="rgba(0,140,120,0.65)">1</tspan>
      <tspan x="97" y="38" fill="rgba(0,140,120,0.65)">1</tspan>
    </text>
    <!-- Bit labels -->
    <text font-family="'Courier New', monospace" font-size="6" text-anchor="middle" fill="rgba(0,140,120,0.35)">
      <tspan x="14" y="52">b3</tspan>
      <tspan x="42" y="52">b2</tspan>
      <tspan x="70" y="52">b1</tspan>
      <tspan x="97" y="52">b0</tspan>
    </text>
    <text x="55" y="72" fill="rgba(0,140,120,0.25)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">4-BIT REG</text>
  </g>

  <!-- ===== Decoder ===== -->
  <g transform="translate(840,90)">
    <!-- Decoder body - inverted trapezoid -->
    <path d="M10,0 L70,0 L80,70 L0,70 Z" fill="rgba(100,50,180,0.05)" stroke="rgba(100,50,180,0.5)" stroke-width="1.5"/>
    <!-- Input lines -->
    <line x1="30" y1="-12" x2="30" y2="0" stroke="rgba(100,50,180,0.45)" stroke-width="1.5"/>
    <line x1="50" y1="-12" x2="50" y2="0" stroke="rgba(100,50,180,0.45)" stroke-width="1.5"/>
    <!-- Output lines -->
    <line x1="80" y1="14" x2="95" y2="14" stroke="rgba(100,50,180,0.35)" stroke-width="1.2"/>
    <line x1="80" y1="30" x2="95" y2="30" stroke="rgba(100,50,180,0.35)" stroke-width="1.2"/>
    <line x1="80" y1="46" x2="95" y2="46" stroke="rgba(100,50,180,0.35)" stroke-width="1.2"/>
    <line x1="80" y1="62" x2="95" y2="62" stroke="rgba(100,50,180,0.35)" stroke-width="1.2"/>
    <!-- Labels -->
    <text x="24" y="-14" fill="rgba(100,50,180,0.45)" font-size="7" font-family="'Courier New', monospace">A</text>
    <text x="46" y="-14" fill="rgba(100,50,180,0.45)" font-size="7" font-family="'Courier New', monospace">B</text>
    <text x="40" y="40" fill="rgba(100,50,180,0.55)" font-size="9" font-family="'Courier New', monospace" text-anchor="middle" font-weight="bold">DEC</text>
    <text x="40" y="82" fill="rgba(100,50,180,0.2)" font-size="8" font-family="'Courier New', monospace" text-anchor="middle">2:4 DECODER</text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowBlue" viewBox="0 0 6 6" refX="5" refY="3" markerWidth="5" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L6,3 L0,6 Z" fill="rgba(30,100,200,0.5)"/>
    </marker>
    <marker id="arrowPurple" viewBox="0 0 6 6" refX="5" refY="3" markerWidth="5" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L6,3 L0,6 Z" fill="rgba(100,50,180,0.5)"/>
    </marker>
    <marker id="arrowTeal" viewBox="0 0 6 6" refX="5" refY="3" markerWidth="5" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L6,3 L0,6 Z" fill="rgba(0,140,120,0.5)"/>
    </marker>
    <marker id="arrowOrange" viewBox="0 0 6 6" refX="5" refY="3" markerWidth="5" markerHeight="5" orient="auto-start-reverse">
      <path d="M0,0 L6,3 L0,6 Z" fill="rgba(200,80,40,0.5)"/>
    </marker>
  </defs>
</svg>
